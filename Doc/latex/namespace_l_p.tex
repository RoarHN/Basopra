\hypertarget{namespace_l_p}{}\section{LP Namespace Reference}
\label{namespace_l_p}\index{LP@{LP}}


Created on Wed Nov 1 15\+:44\+:25 2017 Author Alejandro Pena-\/\+Bello \href{mailto:alejandro.penabello@unige.ch}{\tt alejandro.\+penabello@unige.\+ch} In this script the optimization is set up.  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{namespace_l_p_aff8a41d69b2aa8c8092b2aedd2eb3df6}\label{namespace_l_p_aff8a41d69b2aa8c8092b2aedd2eb3df6}} 
def {\bfseries Concrete\+\_\+model} (Data)
\item 
def \mbox{\hyperlink{namespace_l_p_adad40054f3f8a78955c488f1ece50fed}{Bool\+\_\+char\+\_\+rule\+\_\+1}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_aabc88e88fcb3e47650195e6e8aa72578}{Bool\+\_\+char\+\_\+rule\+\_\+2}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a5e586c9382ca19f09272983cfec619a6}{Bool\+\_\+char\+\_\+rule\+\_\+3}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a1507e408c138290f403907a50e2b5d1c}{Bool\+\_\+char\+\_\+rule\+\_\+4}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_acce964cd8e67ad18d750c9dd5b793ea9}{Batt\+\_\+char\+\_\+dis}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a4dc6c0a11259a3e6c48c358aec140385}{Balance\+\_\+\+Batt\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_aac61ce084b61fa22a2546dafc494bcb0}{E\+\_\+char\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_ab78ac81e78bfa9c6a030d20f4422d4ab}{E\+\_\+dis\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a85d28f45143d7ae45b7e2358dfe14923}{Bool\+\_\+cons\+\_\+rule\+\_\+1}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a748be39fe52af9daef16738ff06030b7}{Bool\+\_\+cons\+\_\+rule\+\_\+2}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a3d3409e76da5b5e02801ea5ba73dc7f1}{Bool\+\_\+cons\+\_\+rule\+\_\+3}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a9dda8c2199a8eba50bb01cdc929d37e5}{Bool\+\_\+cons\+\_\+rule\+\_\+4}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_ab91a1eb4aff41e831d022f2ededb6dcd}{Cons\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a0aaf8565592895b8afeffcd33c6452c7}{Grid\+\_\+cons\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_aaa5c98af22d032fe4789fbf07ff0f7fb}{Balance\+\_\+\+P\+V\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a1b5e92f8502a9cbcd92198d9857a6d83}{Sold\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a7995ecb2641ea88b0911ec2aeca541ca}{Balance\+\_\+load\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a063633601bec91a8e0bf87f9bb0aa6ab}{def\+\_\+storage\+\_\+state\+\_\+rule}} (m, t)
\item 
def \mbox{\hyperlink{namespace_l_p_aae69104b239c580c31f61daa9845e39e}{Conv\+\_\+losses\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_ad920676464ef0ff1688919b8c81ab873}{Inv\+\_\+losses\+\_\+\+P\+V\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_ab5baa41892f3e1bd503c0259eb081d7c}{Inv\+\_\+losses\+\_\+\+Batt\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_aec58b73a9e0936ba025185e9beac66be}{Inv\+\_\+losses\+\_\+\+Grid\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a8e04fc6d66eb06e7b8673fc28098b0bb}{Inv\+\_\+losses\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a25895a3a7f6a2f6e7a24db67779a7232}{Batt\+\_\+losses\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_ac92c34a0b08510b70b35e0d5c70443ee}{Inverter\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_ab2b4ae6c314b779015922d5635090710}{Converter\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a8faf34cc39e6767513fc5a8957d2611f}{Inverter\+\_\+grid\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a12fc2729e8471d6cd254664a9bd94390}{P\+\_\+max\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a785fe683f3e79df7f8a0234fd7bae5b7}{Curtailment\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_acf9197fcddcdd5c3bd324a1227235ee2}{P\+V\+S\+C\+\_\+rule}} (m, i)
\item 
def \mbox{\hyperlink{namespace_l_p_a073ca69e2d3f4650b19e9f703f0e3295}{Obj\+\_\+fcn}} (m)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Created on Wed Nov 1 15\+:44\+:25 2017 Author Alejandro Pena-\/\+Bello \href{mailto:alejandro.penabello@unige.ch}{\tt alejandro.\+penabello@unige.\+ch} In this script the optimization is set up. 

This \mbox{\hyperlink{namespace_l_p}{LP}} algorithm allows the user to optimize the daily electricity bill The system here presented is a D\+C-\/coupled system with a charge controller and a bi-\/directional inverter as presented in \mbox{[}1\mbox{]} It includes efficiency losses. It includes 4 applications and their combination with P\+V\+SC as base app. avoidance of PV curtailment, Demand peak shaving and demand load shifting. Demand peak shaving is done in the same basis than the optimization, i.\+e. if it is a daily optimization, the peak shaving is done every day, if it is yearly, then the peak of the year is shaved and so on. According to the Data it can be expanded to one month or n years optimization An Integrated Inverter is used, in this script the Converter and inverter efficiency are the same and are an input from the user. The delta\+\_\+t allows the user to set the time step delta\+\_\+t=fraction of hour, e.\+g. delta\+\_\+t=0.\+25 is a 15 min time step \mbox{[}1\mbox{]} Installed Cost Benchmarks and Deployment Barriers for Residential Solar+ Photovoltaics with Energy Storage\+: Q1 2016 Kristen Ardani,Eric O\textquotesingle{}Shaughnessy,Ran Fu,Chris Mc\+Clurg,Joshua Huneycutt, and Robert Margolis 

 $\vert$ PV $\vert$---$>$$\vert$ M\+P\+P\+T+\+Ch.Ctrl$\vert$--$>$$\vert$\+Bi-\/\+Inv$\vert$-\/-\/-\/-\/-\/-\/---$\vert$\+Grid$\vert$ -\/--- -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/--- -\/-\/-\/--- $\vert$ -\/-\/--- $\vert$ $\vert$ $\vert$ $\vert$ -\/-\/-\/-\/-\/-\/-\/-\/--- $\vert$ $\vert$ -\/-\/--- $\vert$ $\vert$\+Load$\vert$ 

 \subsubsection*{$\vert$ Batt $\vert$ }

\subsection{Function Documentation}
\mbox{\Hypertarget{namespace_l_p_a4dc6c0a11259a3e6c48c358aec140385}\label{namespace_l_p_a4dc6c0a11259a3e6c48c358aec140385}} 
\index{LP@{LP}!Balance\+\_\+\+Batt\+\_\+rule@{Balance\+\_\+\+Batt\+\_\+rule}}
\index{Balance\+\_\+\+Batt\+\_\+rule@{Balance\+\_\+\+Batt\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Balance\+\_\+\+Batt\+\_\+rule()}{Balance\_Batt\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Balance\+\_\+\+Batt\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Balance of the battery charge, discharge and efficiency losses.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a7995ecb2641ea88b0911ec2aeca541ca}\label{namespace_l_p_a7995ecb2641ea88b0911ec2aeca541ca}} 
\index{LP@{LP}!Balance\+\_\+load\+\_\+rule@{Balance\+\_\+load\+\_\+rule}}
\index{Balance\+\_\+load\+\_\+rule@{Balance\+\_\+load\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Balance\+\_\+load\+\_\+rule()}{Balance\_load\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Balance\+\_\+load\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Balance of electricity demand, includes the electricity provided by the PV, the battery and the grid.
TODO
-------
include the bi-directional inverter energy standby consumption as a function
of the inverter power
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_aaa5c98af22d032fe4789fbf07ff0f7fb}\label{namespace_l_p_aaa5c98af22d032fe4789fbf07ff0f7fb}} 
\index{LP@{LP}!Balance\+\_\+\+P\+V\+\_\+rule@{Balance\+\_\+\+P\+V\+\_\+rule}}
\index{Balance\+\_\+\+P\+V\+\_\+rule@{Balance\+\_\+\+P\+V\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Balance\+\_\+\+P\+V\+\_\+rule()}{Balance\_PV\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Balance\+\_\+\+P\+V\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Balance of PV consumption, includes the electricity provided to the battery, the loads, losses in the inverter and the converter. Includes as well curtailed PV.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_acce964cd8e67ad18d750c9dd5b793ea9}\label{namespace_l_p_acce964cd8e67ad18d750c9dd5b793ea9}} 
\index{LP@{LP}!Batt\+\_\+char\+\_\+dis@{Batt\+\_\+char\+\_\+dis}}
\index{Batt\+\_\+char\+\_\+dis@{Batt\+\_\+char\+\_\+dis}!LP@{LP}}
\subsubsection{\texorpdfstring{Batt\+\_\+char\+\_\+dis()}{Batt\_char\_dis()}}
{\footnotesize\ttfamily def L\+P.\+Batt\+\_\+char\+\_\+dis (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Forbids the battery to charge and discharge at the same time 5/5
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a25895a3a7f6a2f6e7a24db67779a7232}\label{namespace_l_p_a25895a3a7f6a2f6e7a24db67779a7232}} 
\index{LP@{LP}!Batt\+\_\+losses\+\_\+rule@{Batt\+\_\+losses\+\_\+rule}}
\index{Batt\+\_\+losses\+\_\+rule@{Batt\+\_\+losses\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Batt\+\_\+losses\+\_\+rule()}{Batt\_losses\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Batt\+\_\+losses\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Battery losses definition. 1-Battery_efficiency times the electricity that pass through the battery (roundtrip efficiency).
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_adad40054f3f8a78955c488f1ece50fed}\label{namespace_l_p_adad40054f3f8a78955c488f1ece50fed}} 
\index{LP@{LP}!Bool\+\_\+char\+\_\+rule\+\_\+1@{Bool\+\_\+char\+\_\+rule\+\_\+1}}
\index{Bool\+\_\+char\+\_\+rule\+\_\+1@{Bool\+\_\+char\+\_\+rule\+\_\+1}!LP@{LP}}
\subsubsection{\texorpdfstring{Bool\+\_\+char\+\_\+rule\+\_\+1()}{Bool\_char\_rule\_1()}}
{\footnotesize\ttfamily def L\+P.\+Bool\+\_\+char\+\_\+rule\+\_\+1 (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Forbids the battery to charge and discharge at the same time 1/5
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_aabc88e88fcb3e47650195e6e8aa72578}\label{namespace_l_p_aabc88e88fcb3e47650195e6e8aa72578}} 
\index{LP@{LP}!Bool\+\_\+char\+\_\+rule\+\_\+2@{Bool\+\_\+char\+\_\+rule\+\_\+2}}
\index{Bool\+\_\+char\+\_\+rule\+\_\+2@{Bool\+\_\+char\+\_\+rule\+\_\+2}!LP@{LP}}
\subsubsection{\texorpdfstring{Bool\+\_\+char\+\_\+rule\+\_\+2()}{Bool\_char\_rule\_2()}}
{\footnotesize\ttfamily def L\+P.\+Bool\+\_\+char\+\_\+rule\+\_\+2 (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Forbids the battery to charge and discharge at the same time 2/5
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a5e586c9382ca19f09272983cfec619a6}\label{namespace_l_p_a5e586c9382ca19f09272983cfec619a6}} 
\index{LP@{LP}!Bool\+\_\+char\+\_\+rule\+\_\+3@{Bool\+\_\+char\+\_\+rule\+\_\+3}}
\index{Bool\+\_\+char\+\_\+rule\+\_\+3@{Bool\+\_\+char\+\_\+rule\+\_\+3}!LP@{LP}}
\subsubsection{\texorpdfstring{Bool\+\_\+char\+\_\+rule\+\_\+3()}{Bool\_char\_rule\_3()}}
{\footnotesize\ttfamily def L\+P.\+Bool\+\_\+char\+\_\+rule\+\_\+3 (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Forbids the battery to charge and discharge at the same time 3/5
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a1507e408c138290f403907a50e2b5d1c}\label{namespace_l_p_a1507e408c138290f403907a50e2b5d1c}} 
\index{LP@{LP}!Bool\+\_\+char\+\_\+rule\+\_\+4@{Bool\+\_\+char\+\_\+rule\+\_\+4}}
\index{Bool\+\_\+char\+\_\+rule\+\_\+4@{Bool\+\_\+char\+\_\+rule\+\_\+4}!LP@{LP}}
\subsubsection{\texorpdfstring{Bool\+\_\+char\+\_\+rule\+\_\+4()}{Bool\_char\_rule\_4()}}
{\footnotesize\ttfamily def L\+P.\+Bool\+\_\+char\+\_\+rule\+\_\+4 (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Forbids the battery to charge and discharge at the same time 4/5
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a85d28f45143d7ae45b7e2358dfe14923}\label{namespace_l_p_a85d28f45143d7ae45b7e2358dfe14923}} 
\index{LP@{LP}!Bool\+\_\+cons\+\_\+rule\+\_\+1@{Bool\+\_\+cons\+\_\+rule\+\_\+1}}
\index{Bool\+\_\+cons\+\_\+rule\+\_\+1@{Bool\+\_\+cons\+\_\+rule\+\_\+1}!LP@{LP}}
\subsubsection{\texorpdfstring{Bool\+\_\+cons\+\_\+rule\+\_\+1()}{Bool\_cons\_rule\_1()}}
{\footnotesize\ttfamily def L\+P.\+Bool\+\_\+cons\+\_\+rule\+\_\+1 (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Forbids the system to inject and export energy at the same time 1/5
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a748be39fe52af9daef16738ff06030b7}\label{namespace_l_p_a748be39fe52af9daef16738ff06030b7}} 
\index{LP@{LP}!Bool\+\_\+cons\+\_\+rule\+\_\+2@{Bool\+\_\+cons\+\_\+rule\+\_\+2}}
\index{Bool\+\_\+cons\+\_\+rule\+\_\+2@{Bool\+\_\+cons\+\_\+rule\+\_\+2}!LP@{LP}}
\subsubsection{\texorpdfstring{Bool\+\_\+cons\+\_\+rule\+\_\+2()}{Bool\_cons\_rule\_2()}}
{\footnotesize\ttfamily def L\+P.\+Bool\+\_\+cons\+\_\+rule\+\_\+2 (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Forbids the system to inject and export energy at the same time 2/5
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a3d3409e76da5b5e02801ea5ba73dc7f1}\label{namespace_l_p_a3d3409e76da5b5e02801ea5ba73dc7f1}} 
\index{LP@{LP}!Bool\+\_\+cons\+\_\+rule\+\_\+3@{Bool\+\_\+cons\+\_\+rule\+\_\+3}}
\index{Bool\+\_\+cons\+\_\+rule\+\_\+3@{Bool\+\_\+cons\+\_\+rule\+\_\+3}!LP@{LP}}
\subsubsection{\texorpdfstring{Bool\+\_\+cons\+\_\+rule\+\_\+3()}{Bool\_cons\_rule\_3()}}
{\footnotesize\ttfamily def L\+P.\+Bool\+\_\+cons\+\_\+rule\+\_\+3 (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Forbids the system to inject and export energy at the same time 3/5
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a9dda8c2199a8eba50bb01cdc929d37e5}\label{namespace_l_p_a9dda8c2199a8eba50bb01cdc929d37e5}} 
\index{LP@{LP}!Bool\+\_\+cons\+\_\+rule\+\_\+4@{Bool\+\_\+cons\+\_\+rule\+\_\+4}}
\index{Bool\+\_\+cons\+\_\+rule\+\_\+4@{Bool\+\_\+cons\+\_\+rule\+\_\+4}!LP@{LP}}
\subsubsection{\texorpdfstring{Bool\+\_\+cons\+\_\+rule\+\_\+4()}{Bool\_cons\_rule\_4()}}
{\footnotesize\ttfamily def L\+P.\+Bool\+\_\+cons\+\_\+rule\+\_\+4 (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Forbids the system to inject and export energy at the same time 4/5
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_ab91a1eb4aff41e831d022f2ededb6dcd}\label{namespace_l_p_ab91a1eb4aff41e831d022f2ededb6dcd}} 
\index{LP@{LP}!Cons\+\_\+rule@{Cons\+\_\+rule}}
\index{Cons\+\_\+rule@{Cons\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Cons\+\_\+rule()}{Cons\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Cons\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Forbids the system to inject and export energy at the same time 5/5
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_aae69104b239c580c31f61daa9845e39e}\label{namespace_l_p_aae69104b239c580c31f61daa9845e39e}} 
\index{LP@{LP}!Conv\+\_\+losses\+\_\+rule@{Conv\+\_\+losses\+\_\+rule}}
\index{Conv\+\_\+losses\+\_\+rule@{Conv\+\_\+losses\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Conv\+\_\+losses\+\_\+rule()}{Conv\_losses\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Conv\+\_\+losses\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Converter losses definition. 1-Converter_efficiency times the electricity that pass through the converter.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_ab2b4ae6c314b779015922d5635090710}\label{namespace_l_p_ab2b4ae6c314b779015922d5635090710}} 
\index{LP@{LP}!Converter\+\_\+rule@{Converter\+\_\+rule}}
\index{Converter\+\_\+rule@{Converter\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Converter\+\_\+rule()}{Converter\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Converter\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Converter power definition. All electricity flows through the Converter must be lower than the inverter nominal power (including losses).
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a785fe683f3e79df7f8a0234fd7bae5b7}\label{namespace_l_p_a785fe683f3e79df7f8a0234fd7bae5b7}} 
\index{LP@{LP}!Curtailment\+\_\+rule@{Curtailment\+\_\+rule}}
\index{Curtailment\+\_\+rule@{Curtailment\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Curtailment\+\_\+rule()}{Curtailment\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Curtailment\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Restrains the maximum PV injection into the grid (in kW) if avoidance of PV curtailment is activated. In the other case it skips the rule since PV curtailed is not necessarily zero, it depends as well on the inverter size.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a063633601bec91a8e0bf87f9bb0aa6ab}\label{namespace_l_p_a063633601bec91a8e0bf87f9bb0aa6ab}} 
\index{LP@{LP}!def\+\_\+storage\+\_\+state\+\_\+rule@{def\+\_\+storage\+\_\+state\+\_\+rule}}
\index{def\+\_\+storage\+\_\+state\+\_\+rule@{def\+\_\+storage\+\_\+state\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{def\+\_\+storage\+\_\+state\+\_\+rule()}{def\_storage\_state\_rule()}}
{\footnotesize\ttfamily def L\+P.\+def\+\_\+storage\+\_\+state\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{t }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
State of charge definition as the previous SOC plus charged electricity minus losses minus discharged electricity. Stablishes as well the initial SOC at SOC_min
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_aac61ce084b61fa22a2546dafc494bcb0}\label{namespace_l_p_aac61ce084b61fa22a2546dafc494bcb0}} 
\index{LP@{LP}!E\+\_\+char\+\_\+rule@{E\+\_\+char\+\_\+rule}}
\index{E\+\_\+char\+\_\+rule@{E\+\_\+char\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{E\+\_\+char\+\_\+rule()}{E\_char\_rule()}}
{\footnotesize\ttfamily def L\+P.\+E\+\_\+char\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Balance of energy charged into the battery from PV and grid.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_ab78ac81e78bfa9c6a030d20f4422d4ab}\label{namespace_l_p_ab78ac81e78bfa9c6a030d20f4422d4ab}} 
\index{LP@{LP}!E\+\_\+dis\+\_\+rule@{E\+\_\+dis\+\_\+rule}}
\index{E\+\_\+dis\+\_\+rule@{E\+\_\+dis\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{E\+\_\+dis\+\_\+rule()}{E\_dis\_rule()}}
{\footnotesize\ttfamily def L\+P.\+E\+\_\+dis\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Sets the maximum energy available to be discharged as the SOC - the minimum SOC.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a0aaf8565592895b8afeffcd33c6452c7}\label{namespace_l_p_a0aaf8565592895b8afeffcd33c6452c7}} 
\index{LP@{LP}!Grid\+\_\+cons\+\_\+rule@{Grid\+\_\+cons\+\_\+rule}}
\index{Grid\+\_\+cons\+\_\+rule@{Grid\+\_\+cons\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Grid\+\_\+cons\+\_\+rule()}{Grid\_cons\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Grid\+\_\+cons\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Balance of grid consumption, includes the electricity consumed by the battery, the loads, and losses in the inverter (when charging the battery from the grid),
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_ab5baa41892f3e1bd503c0259eb081d7c}\label{namespace_l_p_ab5baa41892f3e1bd503c0259eb081d7c}} 
\index{LP@{LP}!Inv\+\_\+losses\+\_\+\+Batt\+\_\+rule@{Inv\+\_\+losses\+\_\+\+Batt\+\_\+rule}}
\index{Inv\+\_\+losses\+\_\+\+Batt\+\_\+rule@{Inv\+\_\+losses\+\_\+\+Batt\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Inv\+\_\+losses\+\_\+\+Batt\+\_\+rule()}{Inv\_losses\_Batt\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Inv\+\_\+losses\+\_\+\+Batt\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Battery inverter losses definition. 1-Inverter_efficiency times the electricity that pass through the Inverter (takes into account only battery related electricity). E_dis is the energy discharged from the battery, thus no need to divide by the inverter efficiency.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_aec58b73a9e0936ba025185e9beac66be}\label{namespace_l_p_aec58b73a9e0936ba025185e9beac66be}} 
\index{LP@{LP}!Inv\+\_\+losses\+\_\+\+Grid\+\_\+rule@{Inv\+\_\+losses\+\_\+\+Grid\+\_\+rule}}
\index{Inv\+\_\+losses\+\_\+\+Grid\+\_\+rule@{Inv\+\_\+losses\+\_\+\+Grid\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Inv\+\_\+losses\+\_\+\+Grid\+\_\+rule()}{Inv\_losses\_Grid\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Inv\+\_\+losses\+\_\+\+Grid\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
PV inverter losses definition. 1-Inverter_efficiency times the electricity that pass through the Inverter (takes into account only grid related electricity, i.e. for charging the battery).
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_ad920676464ef0ff1688919b8c81ab873}\label{namespace_l_p_ad920676464ef0ff1688919b8c81ab873}} 
\index{LP@{LP}!Inv\+\_\+losses\+\_\+\+P\+V\+\_\+rule@{Inv\+\_\+losses\+\_\+\+P\+V\+\_\+rule}}
\index{Inv\+\_\+losses\+\_\+\+P\+V\+\_\+rule@{Inv\+\_\+losses\+\_\+\+P\+V\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Inv\+\_\+losses\+\_\+\+P\+V\+\_\+rule()}{Inv\_losses\_PV\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Inv\+\_\+losses\+\_\+\+P\+V\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
PV inverter losses definition. 1-Inverter_efficiency times the electricity that pass through the Inverter (takes into account only PV related electricity).
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a8e04fc6d66eb06e7b8673fc28098b0bb}\label{namespace_l_p_a8e04fc6d66eb06e7b8673fc28098b0bb}} 
\index{LP@{LP}!Inv\+\_\+losses\+\_\+rule@{Inv\+\_\+losses\+\_\+rule}}
\index{Inv\+\_\+losses\+\_\+rule@{Inv\+\_\+losses\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Inv\+\_\+losses\+\_\+rule()}{Inv\_losses\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Inv\+\_\+losses\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Inverter losses definition. Summation of the PV, battery and grid related losses.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a8faf34cc39e6767513fc5a8957d2611f}\label{namespace_l_p_a8faf34cc39e6767513fc5a8957d2611f}} 
\index{LP@{LP}!Inverter\+\_\+grid\+\_\+rule@{Inverter\+\_\+grid\+\_\+rule}}
\index{Inverter\+\_\+grid\+\_\+rule@{Inverter\+\_\+grid\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Inverter\+\_\+grid\+\_\+rule()}{Inverter\_grid\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Inverter\+\_\+grid\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Inverter power definition. All electricity flows through the inverter must be lower than the inverter nominal power (including losses). This rule is used for grid charging only.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_ac92c34a0b08510b70b35e0d5c70443ee}\label{namespace_l_p_ac92c34a0b08510b70b35e0d5c70443ee}} 
\index{LP@{LP}!Inverter\+\_\+rule@{Inverter\+\_\+rule}}
\index{Inverter\+\_\+rule@{Inverter\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Inverter\+\_\+rule()}{Inverter\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Inverter\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Inverter power definition. All electricity flows through the inverter must be lower than the inverter nominal power (including losses).
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a073ca69e2d3f4650b19e9f703f0e3295}\label{namespace_l_p_a073ca69e2d3f4650b19e9f703f0e3295}} 
\index{LP@{LP}!Obj\+\_\+fcn@{Obj\+\_\+fcn}}
\index{Obj\+\_\+fcn@{Obj\+\_\+fcn}!LP@{LP}}
\subsubsection{\texorpdfstring{Obj\+\_\+fcn()}{Obj\_fcn()}}
{\footnotesize\ttfamily def L\+P.\+Obj\+\_\+fcn (\begin{DoxyParamCaption}\item[{}]{m }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
The bill is calculated in two parts, the energy related part is the retail price times the energy consumed from the grid minus the export price times the PV injection. If there is demand peak shaving (a capacity tariff is applied) the maximum power taken from the grid (in kW) is multiplied by the DAILY capacity tariff ($/kW per day).
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a12fc2729e8471d6cd254664a9bd94390}\label{namespace_l_p_a12fc2729e8471d6cd254664a9bd94390}} 
\index{LP@{LP}!P\+\_\+max\+\_\+rule@{P\+\_\+max\+\_\+rule}}
\index{P\+\_\+max\+\_\+rule@{P\+\_\+max\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{P\+\_\+max\+\_\+rule()}{P\_max\_rule()}}
{\footnotesize\ttfamily def L\+P.\+P\+\_\+max\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Calculates the maximum power drained from the grid each day.
TODO
-------
include the same rule for PV injection as well
#def P_max_rule_grid(m,i):
return (m.E_PV_grid[i]<=m.P_max_day*m.dt)
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_acf9197fcddcdd5c3bd324a1227235ee2}\label{namespace_l_p_acf9197fcddcdd5c3bd324a1227235ee2}} 
\index{LP@{LP}!P\+V\+S\+C\+\_\+rule@{P\+V\+S\+C\+\_\+rule}}
\index{P\+V\+S\+C\+\_\+rule@{P\+V\+S\+C\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{P\+V\+S\+C\+\_\+rule()}{PVSC\_rule()}}
{\footnotesize\ttfamily def L\+P.\+P\+V\+S\+C\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
Sets the flows from grid to the battery to zero if demand load shifting is not activated. In the other case it skips the rule.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespace_l_p_a1b5e92f8502a9cbcd92198d9857a6d83}\label{namespace_l_p_a1b5e92f8502a9cbcd92198d9857a6d83}} 
\index{LP@{LP}!Sold\+\_\+rule@{Sold\+\_\+rule}}
\index{Sold\+\_\+rule@{Sold\+\_\+rule}!LP@{LP}}
\subsubsection{\texorpdfstring{Sold\+\_\+rule()}{Sold\_rule()}}
{\footnotesize\ttfamily def L\+P.\+Sold\+\_\+rule (\begin{DoxyParamCaption}\item[{}]{m,  }\item[{}]{i }\end{DoxyParamCaption})}

\begin{DoxyVerb}Description
-------
The total PV generation must be greater than the PV electricity injected into the grid and the PV curtailed.
\end{DoxyVerb}
 